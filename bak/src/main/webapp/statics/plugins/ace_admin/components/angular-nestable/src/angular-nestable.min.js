/**
 * Angular nestable 0.0.1
 * Copyright (c) 2014 Kamil Pekala
 * https://github.com/kamilkp/ng-nestable
 */
!function(a,b,c,d){c.module("ng-nestable",[]).provider("$nestable",function(){var a="$item",b={};this.$get=function(){return{modelName:a,defaultOptions:b}},this.modelName=function(b){a=b},this.defaultOptions=function(a){b=a}}).directive("ngNestable",["$compile","$nestable",function(a,b){function d(a,b){var c=$('<div class="dd"></div>'),d=$('<ol class="dd-list"></ol>').appendTo(c);return a.forEach(function f(a){var c=Array.prototype.slice.call(arguments).slice(-1)[0];c instanceof $||(c=d);var g=$('<li class="dd-item"></li>'),h=$('<div ng-nestable-item class="dd-handle"></div>');if(h.append(b).appendTo(g),c.append(g),g.data("item",a.item),e(a.children)&&a.children.length>0){var i=$('<ol class="dd-list"></ol>').appendTo(g);a.children.forEach(function(a){f.apply(this,Array.prototype.slice.call(arguments).concat([i]))})}}),c}function e(a){return"[object Array]"===Object.prototype.toString.call(a)}function f(a,b){var c=b.$formatters,d=c.length;for(b.$modelValue=a;d--;)a=c[d](a);return a}return{restrict:"A",require:"ngModel",compile:function(c){var e=c.html();return c.empty(),function(c,g,h,i){var j=$.extend({},b.defaultOptions,c.$eval(h.ngNestable));c.$watchCollection(function(){return i.$modelValue},function(b){if(b){b=f(b,i);var h=d(b,e);g.empty().append(h),a(h)(c),h.nestable(j),h.on("change",function(){i.$setViewValue(h.nestable("serialize")),c&&c.$root&&c.$root.$$phase||c.$apply()})}})}},controller:c.noop}}]).directive("ngNestableItem",["$nestable",function(a){return{scope:!0,require:"^ngNestable",link:function(b,c){b[a.modelName]=c.parent().data("item")}}}])}(window,document,window.angular);